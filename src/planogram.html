
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="node_modules/gridstack/dist/gridstack.min.css" rel="stylesheet"/>
        <link href="node_modules/gridstack/dist/gridstack-extra.min.css" rel="stylesheet"/>

        <link href="style.css" rel="stylesheet"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    </head>
    <body>        
        
        <script src="node_modules/gridstack/dist/gridstack-all.js"></script>

        <div class="container">
            <div class="row">
                <h1>PLANOGRAM</h1>
            </div>
            <div class="row">                
                <div class="col-8 center" style="background-color: white;">  
                    <hr class="hr m-1" />
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <p class="fs-6">40 cm</p>
                        </div>                        
                        <div class="col-7">
                            <p class="fs-6 text-center">150 cm</p>
                        </div>                        
                    </div>                      
                    <hr class="hr m-1" />
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <p class="fs-6">40 cm</p>
                        </div>                        
                        <div class="col-7">
                            <div id="grid1" class="grid-stack"></div>
                        </div>                        
                    </div>                
                    <hr class="hr m-1" />
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <p class="fs-6">40 cm</p>
                        </div>                       
                        <div class="col-7">
                            <div id="grid2" class="grid-stack"></div>
                        </div>                        
                    </div>   
                    <hr class="hr m-1" />   
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <p class="fs-6">40 cm</p>
                        </div>                       
                        <div class="col-7">
                            <div id="grid3" class="grid-stack"></div>
                        </div>                        
                    </div>                
                    <hr class="hr m-1" />   
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <p class="fs-6">40 cm</p>
                        </div>                       
                        <div class="col-7">
                            <div id="grid4" class="grid-stack"></div>
                        </div>                        
                    </div>
                    <hr class="hr m-1" />   
                    <div class="row">
                        <div class="col-1 d-flex align-items-center">
                            <p class="fs-6">40 cm</p>
                        </div>                       
                        <div class="col-7">
                            <div id="grid5" class="grid-stack"></div>
                        </div>                        
                    </div>           
                    <hr class="hr m-1" />                     
                </div>                    
                <div class="col-4">
                    <row>
                        <form>
                            <div class="mb-3">
                                <label for="exampleInputEmail1" class="form-label">Height</label>
                                <input type="height" class="form-control" id="height" aria-describedby="emailHelp">
                                <div id="emailHelp" class="form-text">Height of the shelf</div>
                            </div>
                            <div class="mb-3">
                                <label for="exampleInputEmail1" class="form-label">Width</label>
                                <input type="width" class="form-control" id="width" aria-describedby="emailHelp">
                                <div id="emailHelp" class="form-text">Width of the shelf</div>
                            </div>                        
                            <a onclick="addS()" class="btn btn-primary">Add Shelf</a>
                        </form>
                    </row>
                    <row>
                        <form>
                            <div class="mb-3">
                                <label for="exampleInputEmail1" class="form-label">Product Height</label>
                                <input type="height" class="form-control" id="productHeight" aria-describedby="emailHelp">
                                <div id="emailHelp" class="form-text">Height of the product</div>
                            </div>
                            <div class="mb-3">
                                <label for="exampleInputEmail1" class="form-label">Product Width</label>
                                <input type="width" class="form-control" id="productWidth" aria-describedby="emailHelp">
                                <div id="emailHelp" class="form-text">Width of the product</div>
                            </div>                        
                            <a  onclick="addW()" class="btn btn-primary">Submit</a>
                        </form>
                    </row>                    
                </div>    
            </div>            
        </div>

        

        <script>

            let fixedLen    = 200;
            let fixedHight  = 50;
            
            let numCol      = 12;
            let width       = 150;
            let heightCm    = 40;

            let ratio       = 5;            
            let minSize     = 12;
            let rowHeigth   = '20px';//minSize + 'vh';
            var shelfs      = [];

            const serializedData = [
              /*  {x: 0, y: minSize, w: 3, h: 40/ratio, content: 'item 0'},
                {x: 3, y: minSize, w: 3, h: 20/ratio, content: 'item 1'},
                {x: 6, y: minSize, w: 3, h: 20/ratio, content: 'item 2'},
                {x: 9, y: minSize, w: 3, h: 40/ratio, content: 'item 3'}*/
            ];
            //var grid = GridStack.init({float: true, row:minSize, margin:5});
            
            GridStack.renderCB = function(el, w) {
                el.innerHTML = w.content;
            };

           /* let grid = GridStack.init({
                float: true,
                cellHeight: 100 // fixed as default 'auto' (square) makes it hard to test 1-3 column in actual large windows tests
            })
                */

            var grid1 = GridStack.addGrid(document.getElementById('grid1'), {float: true, row:minSize, margin:5});
            var grid2 = GridStack.addGrid(document.getElementById('grid2'), {float: true, row:minSize, margin:5});
            var grid3 = GridStack.addGrid(document.getElementById('grid3'), {float: true, row:minSize, margin:5});
            var grid4 = GridStack.addGrid(document.getElementById('grid4'), {float: true, row:minSize, margin:5});
            var grid5 = GridStack.addGrid(document.getElementById('grid5'), {float: true, row:minSize, margin:5});

            grid1.cellHeight(rowHeigth);
            grid2.cellHeight(rowHeigth);
            grid2.cellHeight(rowHeigth);
            grid3.cellHeight(rowHeigth);
            grid4.cellHeight(rowHeigth);
            grid5.cellHeight(rowHeigth);
            
            
            grid1.load(serializedData);

            function addW()
            {
                let productHeight = document.getElementById("productHeight");
                let productWidth = document.getElementById("productWidth");

                var img = document.createElement("img");
                
                

                let wRatio = fixedLen / 12;
                let hRatio = fixedHight / minSize;

                let realSizeMilkaW = 10;
                let realSizeMilkaH = 5;
                
                let milkaW = Math.round((realSizeMilkaW * 12) / fixedLen);
                let milkaH = Math.round((realSizeMilkaH * minSize) / fixedHight);

                let realSizeColaW = 20;
                let realSizeColaH = 50;
                
                let colaW  = Math.round((realSizeColaW * 12) / fixedLen);
                let colaH  = Math.round((realSizeColaH * minSize) / fixedHight);



                grid1.addWidget({ w: milkaW, h: milkaH, content: `<img height="100%" width="100%" src="image/milka.png"></img>`});
                grid1.addWidget({ w: colaW, h: colaH, content: `<img height="100%" width="100%" src="image/cola.jpg"></img>`});
            }

            function addS()
            {
                let productHeight = document.getElementById("productHeight");
                let productWidth = document.getElementById("productWidth");

                grid2.addWidget({y: minSize, w: productWidth.value/ratio, h: productHeight.value/ratio, content: 'item 0'});             
            }

        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    </body>
</html>